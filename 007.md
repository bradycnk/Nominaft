
-- 1. Consolidación de campos requeridos para la nómina indexada
ALTER TABLE empleados 
ADD COLUMN IF NOT EXISTS rif TEXT,
ADD COLUMN IF NOT EXISTS departamento TEXT,
ADD COLUMN IF NOT EXISTS salario_base_vef NUMERIC(15, 2) DEFAULT 0.00;

-- 2. Asegurar que los cargos tengan un valor por defecto si están vacíos
UPDATE empleados SET cargo = 'General' WHERE cargo IS NULL OR cargo = '';

-- 3. Índice de búsqueda rápida por Cédula y RIF
CREATE INDEX IF NOT EXISTS idx_empleados_id_fiscal ON empleados(cedula, rif);
