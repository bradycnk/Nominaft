
-- 1. Configuración de Beneficios Anuales (LOTTT)
-- Por ley: Utilidades mínimas 30 días, Bono Vacacional 15 días base.
ALTER TABLE configuracion_global 
ADD COLUMN IF NOT EXISTS dias_utilidades INTEGER DEFAULT 30,
ADD COLUMN IF NOT EXISTS dias_bono_vacacional_base INTEGER DEFAULT 15;

-- 2. Histórico de Prestaciones Sociales (Fideicomiso / Garantía)
-- Se necesita saber cuánto tiene acumulado el trabajador para mostrarlo en el recibo.
ALTER TABLE empleados 
ADD COLUMN IF NOT EXISTS prestaciones_acumuladas_vef NUMERIC(18, 2) DEFAULT 0.00,
ADD COLUMN IF NOT EXISTS ultima_actualizacion_prestaciones DATE;

-- 3. Trigger para actualizar antigüedad (Opcional, pero recomendado mantener fecha_ingreso limpia)
COMMENT ON COLUMN empleados.prestaciones_acumuladas_vef IS 'Monto acumulado en garantía de prestaciones sociales (Artículo 142 LOTTT)';
