
-- 1. Asegurar que el bucket de expedientes sea público para visualización directa
UPDATE storage.buckets 
SET public = true 
WHERE id = 'expedientes';

-- 2. Asegurar que las políticas permitan lectura pública (Select) 
-- aunque el bucket sea público, las políticas de Supabase Storage son necesarias
CREATE POLICY "Acceso público a fotos de empleados"
ON storage.objects FOR SELECT
USING (bucket_id = 'expedientes');

-- 3. Confirmar que la tabla empleados tenga los tipos de datos correctos para salarios
-- (Aseguramos precisión decimal para cálculos de nómina)
ALTER TABLE empleados 
ALTER COLUMN salario_usd TYPE NUMERIC(15, 2);
